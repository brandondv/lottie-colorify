(function(g,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(g=typeof globalThis<"u"?globalThis:g||self,t(g.index={}))})(this,function(g){"use strict";const t=s=>{if(typeof s=="string"){const f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);if(!f)throw new Error("Color does not match hex format");return[Math.round(parseInt(f[1],16)/255*1e3)/1e3,Math.round(parseInt(f[2],16)/255*1e3)/1e3,Math.round(parseInt(f[3],16)/255*1e3)/1e3,1]}else{if(typeof s=="object"&&s.length===3&&s.every(f=>f>=0&&f<=255))return[Math.round(s[0]/255*1e3)/1e3,Math.round(s[1]/255*1e3)/1e3,Math.round(s[2]/255*1e3)/1e3,1];if(typeof s=="object"&&s.length===4&&s.every(f=>f>=0&&f<=255))return[Math.round(s[0]/255*1e3)/1e3,Math.round(s[1]/255*1e3)/1e3,Math.round(s[2]/255*1e3)/1e3,s[3]];throw s?new Error("Color can be only hex or rgb(a) array (ex. [10,20,30,1])"):new Error("Color not defined")}},w=s=>{const f=Math.round(s[0]*255).toString(16).padStart(2,"0"),k=Math.round(s[1]*255).toString(16).padStart(2,"0"),a=Math.round(s[2]*255).toString(16).padStart(2,"0");return`#${f}${k}${a}`},m=s=>[Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)],p=s=>[Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255),s[3]],S=s=>{const f=[];function k(a){if(a.g&&a.g.k&&a.g.k.k&&Array.isArray(a.g.k.k)&&a.g.k.k.length%4===0){Array.isArray(a.g.k.k)&&typeof a.g.k.k[0]!="number"&&k(a.g.k.k);const u=[...a.g.k.k];for(;u.length;){const d=[...u.splice(1,3),u.shift()];f.push(p(d))}}else if(a.s&&Array.isArray(a.s)&&a.s.length===4)f.push(p(a.s));else if(a.c&&a.c.k)Array.isArray(a.c.k)&&typeof a.c.k[0]!="number"?k(a.c.k):f.push(m(a.c.k));else for(const u in a)typeof a[u]=="object"&&k(a[u]);return f}return k(s),f},e=s=>{const k=S(s).map(u=>JSON.stringify(u)),a=new Set(k);return Array.from(a,u=>JSON.parse(u))},T=(s,f,k=!0)=>{let a=0;function u(d,o){o&&o.s&&Array.isArray(o.s)&&o.s.length===4?(d[a]&&(o.s=[...d[a]]),a++):o&&o.c&&o.c.k&&(Array.isArray(o.c.k)&&typeof o.c.k[0]!="number"?u(d,o.c.k):(d[a]&&(o.c.k=d[a]),a++));for(const h in o)typeof o[h]=="object"&&u(d,o[h]);return o}return u(s,k?structuredClone(f):f)},v=(s=[],f,k=!0)=>{const a=[];return s.forEach(u=>{a.push(t(u))}),T(a,k?structuredClone(f):f)},C=(s,f,k=!0)=>{const a=t(s);if(!a)throw new Error("Proper colors must be used for target");function u(d,o){if(o&&o.s&&Array.isArray(o.s)&&o.s.length===4)o.s=[...d];else if(o&&o.c&&o.c.k)Array.isArray(o.c.k)&&typeof o.c.k[0]!="number"?u(d,o.c.k):o.c.k=d;else for(const h in o)typeof o[h]=="object"&&u(d,o[h]);return o}return u(a,k?structuredClone(f):f)},l=s=>Math.round(s*1e3)/1e3,A=(s,f,k,a=!0)=>{const u=t(s),d=t(f);if(!u||!d)throw new Error("Proper colors must be used for both source and target");function o(h,M,r){if(r&&r.s&&Array.isArray(r.s)&&r.s.length===4)h[0]===r.s[0]&&h[1]===r.s[1]&&h[2]===r.s[2]&&(r.s=[...M]);else if(r&&r.c&&r.c.k)Array.isArray(r.c.k)&&typeof r.c.k[0]!="number"?o(h,M,r.c.k):Math.abs(h[0]-l(r.c.k[0]))<.003&&Math.abs(h[1]-l(r.c.k[1]))<.003&&Math.abs(h[2]-l(r.c.k[2]))<.003&&(r.c.k=M);else if(r.g&&r.g.k&&r.g.k.k&&r.g.k.k.length%4===0)for(let y=0;y<r.g.k.k.length;y+=4)Math.abs(l(h[0])-l(r.g.k.k[y+1]))<.003&&Math.abs(l(h[1])-l(r.g.k.k[y+2]))<.003&&Math.abs(l(h[2])-l(r.g.k.k[y+3]))<.003&&(r.g.k.k[y+1]=M[0],r.g.k.k[y+2]=M[1],r.g.k.k[y+3]=M[2],r.g.k.k[y+4]=M[3]);else for(const y in r)typeof r[y]=="object"&&o(h,M,r[y]);return r}return o(u,d,a?structuredClone(k):k)},E=(s,f)=>s.reduce((k,[a,u])=>A(a,u,k),f),R=(s,f,k)=>{let a={...k};return s.forEach((u,d)=>{const o=f[d%f.length];a=A(u,o,a)}),a};g.colorify=v,g.convertColorToLottieColor=t,g.convertLottieColorToHex=w,g.convertLottieColorToRgb=m,g.convertLottieColorToRgba=p,g.flatten=C,g.getColors=S,g.getUniqueColors=e,g.modifyColors=T,g.replaceColor=A,g.replaceColors=E,g.replaceColorsLoop=R,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});
